---
title: 虚拟机参数及JVM优化
date: 2022-03-12 19:47:41
permalink: /jvm/optimization/
categories:
  - 面试
  - 八股文
  - JVM
tags:
  - JVM
---
  
# 虚拟机参数
## 内存模型
![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/jmm.png)

## 参数详解
[JVM参数配置这些你都知道吗？](https://mp.weixin.qq.com/s?__biz=MzA3NTI4NzY4Ng==&mid=2247484900&idx=1&sn=c53f74528a708fb56965b5499657596a&chksm=9f73980da804111bf2be4ed6591d57ba0614f2bdc209089790a38d4b2f2403049c2ee9c3ec94&token=1271815178&lang=zh_CN#rd)

## StackOverflowError示例

```java
// JVM设置 ‐Xss128k(默认1M)
public class StackOverflowTest {

    static int count = 0;

    static void redo() {
        count++;
        redo();
    }

    public static void main(String[] args) {
        try {
            redo();
        } catch (Throwable t) {
            t.printStackTrace();
            System.out.println(count);
        }
    }
}
```
```shell
## 运行结果
java.lang.StackOverflowError
	at top.janker.java.interview.code.jvm.StackOverflowTest.redo(StackOverflowTest.java:19)
	at top.janker.java.interview.code.jvm.StackOverflowTest.redo(StackOverflowTest.java:19)
	at top.janker.java.interview.code.jvm.StackOverflowTest.redo(StackOverflowTest.java:19)
```
**结论**: -Xss设置越小count值越小，说明一个线程栈里能分配的栈帧就越少，但是对JVM整体来说能开启的线程数会更多


