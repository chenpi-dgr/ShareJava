---
title: 基础版项目的开始
date: 2022-03-19 23:33:12
permalink: /project/micro-base-start/
categories:
  - 实战项目
  - JMall商城微服务项目-基础版
tags:
  - 实战项目
  - 微服务
---


## 开篇叨叨

很久很久以前就想跟小伙伴一块搞一个开源的实战项目，一是能操刀干点东西，二呢，也是为了便于小伙伴面试聊项目有得说，今天我终于提笔开始写项目的第一篇文章。

要开始一个实战项目，其实关于方向的选择，也讨论过很多，GitHub时长上也有许多方面的项目可以参考，经过多次讨论，这次的项目的主题就是一个B2C的商城项目，核心功能上与 JD 类似，借鉴一下成熟项目的经验『抄一下』。下面我们就模拟一下真实项目的开发过程。

## 功能梳理

针对项目来说，离开业务谈技术实现是非常虚的，如同纸上谈兵。对于我来说，没做过电商项目，也不了解电商业务，顶多在app上购购物。如何快速上手电商业务呢，我个人的办法是看书。最近通过看书也大致了解了电商相关的业务知识，下面咱们具体说下具体都有那些功能。

### 术语

|  术语   | 全称  | 描述|
|  ----  | ----  | ---- |
| B2C  | Business to Consumer | B2C是指电子商务的一种模式，也是直接面向消费者销售产品和服务商业的零售模式。企业与消费者之间的电子商务。 B2C是电子商务最普遍的模式，就是通常说的商业零售，借助互联网进 行在线销售，直接面向消费者销售产品和服务，消费者线上支付，网上 购物。B2C模式的电商是日常生活中最常见的模式，类似京东、天猫等 都是典型的B2C商城。 |
| POP  | Platform Open Plan开放式平台 | 京东pop店铺的全称Platform Open Plan开放式平台，是大家俗称的三方店铺。也是京东商城的一种店铺模式，京东提供一个销售产品的平台，POP商家通过京东平台实现商品的流转销售，京东只收取“佣金”。 |

由于自营模式比较特殊，本项目就只针对POP三方店铺这种模式去展开业务探索。

### 支撑线后台

很多人接触电商都是从淘宝(天猫)、京东开始，也仅限于前端商 城，很少有机会了解后台。如同骨骼之于人体，后台对于电商业务的支 撑起着至关重要的作用。一开始接触后台产品，会觉得异常困难，因为 后台不是某个独立系统，而是多个模块组合，并且之间还有信息交互。 后台重逻辑、重业务，对产品经理的要求很高，令许多人望而却步。不 过当我们慢慢梳理清楚业务，弄清楚系统之间的信息流转，就能逐渐成 长，甚至在逻辑自洽中找到做后台产品的乐趣。

####  什么是电商后台
前端的一小步，后台服务的一大步，这一点也没错，平常我们用的最常见的功能，比如购物车、优惠券等，看似很简 单，用户在使用时也就是点一下，实际上在后台要经过很多条件的校验、多系统间的信息流转。

电商后台对大部分用户来说很陌生，平常几乎接触不到。后台与前 端是相对的，对普通消费者来说，商家系统和平台管理系统都属于后 台;对平台上的商家而言，商家系统就是后台系统;对平台来说，平台 的管理系统属于后台，针对C端的APP、H5商城和针对B端的商家管理 系统都属于用户端。

电商后台系统，其实也不能叫做一个系统，可以称为后端支撑产品 线，一些公司将其拆分为很多子系统，阿里更将其发展成了中台事业群(商品中心、搜索事业部、共享业务平台等)。后端一系列系统支撑着 公司各种业务的进行和发展，当前端展示、业务处理(订单、售后)、 库存变动等业务正在进行时，后端各系统间则互相调用接口进行数据更 新。

前端用户简单的下单动作，需要后台系统多系 统模块之间的配合。对于产品经理来讲，理清各系统之间的业务逻辑， 特别是当商品类型多样(包括服务商品、实物商品、服务加实物商品 等)，业务复杂(包括预售、代销、代发等)时，各系统模块的隔离、 设计时考虑扩展性非常必要。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320012146.png)

在电商企业中，后台系统主要的作用是业务支撑、优化服务流程、 提高服务效率，还可以提供数据分析参考，进而为业务调整提供参考。

####  电商后台产品架构

电商后台是业务要求较高的产品，当前台产品或业务人员提出需求 时，有经验的后台产品经理第一时间想到的不是画原型、设计功能，而 是分析要实现需求涉及哪些模块，需要协调哪些子系统对接。所以优秀 的产品经理一定是对产品整体架构比较清楚，能从系统整体角度考虑功 能的合理性，在平台层面为未来可能的业务发展进行规划和设计。

电商后台产品架构设计要求产品经理非常懂业务。对于系统逻辑思 维、整体业务认知以及发展的前瞻性，不同行业、不同用户群的产品经 理在做产品整体架构时思路也会不一样。

针对一般电商业务，笔者简单画了一张产品模块示意图，基本一些中小型电商公司的产品架构大致如此。除了图中所示， 现在很多电商公司开始转型社交电商，采用UGC模式或直播电商，在产 品架构上会新增资讯系统，实现资讯与商品的高度融合。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320013658.png)

1. 商品中心:主要管理SKU(最小库存单位)、SPU(标准化产 品单元)、属性(关键属性、非关键属性、销售属性)、类目品牌、价 格等有关商品的数据。
2. 订单中心:管理订单类型、订单状态，收集关于商品、优惠、用户、收货信息、支付信息等一系列的订单实时数据，进行库存更 新、订单下发等一系列动作。
3. 支付中心:管理支付数据，调用第三方支付平台接口，记录 支付信息(对应订单号、支付金额等)，支付对账。
4. 会员中心:主要管理用户等级、用户权益、积分、卡券等会 员相关信息，通过一系列满足用户心理、提高黏性的方法来实现开发新 用户、增加用户活跃度的目的。
5. 调度中心:将订单信息转化为发货通知单，以及其他出入库单，调度仓库和物流进行发货。
6. 促销中心:主要管理活动相关，优惠券、满减、专场活动、 促销专区等。促销工具的开发对电商尤其重要。促销活动的滥用易造成 的用户疲劳，怎样推陈出新，给产品经理造成了很大挑战。
7. 内容管理系统:主要是对用户端进行页面配置(Banner、 ICON、Tab)，配置首页，自定义活动页面，设置生效时效。
8. 评价中心:管理商品评价和用户反馈。这并没有想象的那么 简单，涉及一些敏感词和敏感图片的筛选，以及回复内容管理。
9. 采购中心:管理SKU，当库存预警时，及时生成采购单进行 入库。有供应商管理模块，主要进行供应商管理评级，发展新供应商等 功能。
10. 财务管理:主要管理订单、采购系统相关的财务数据，数据 准确性要求较高。还需要负责对账、清账、统计等业务。
11. WMS系统(仓库管理系统):主要包括入库、出库、盘点 等模块。WMS主要和调度中心进行数据交互，反馈出入库状态和库存 变动。
12. 物流中心:主要包括运费模板，负责运费管理(前端订单、 真实物流成本)、物流状态保存查询(包括快递100、菜鸟等关联业 务)。如果是跨境电商，还涉及和海关总署的对接，进行报关操作。
13. 风控中心:主要利用大数据进行用户信用建设、反欺诈，避 免恶意评价、刷单退款等操作，构建安全的电商购物环境。
14. 客服中心:主要管理退货退款、售后服务等操作，包括呼叫 中心、在线客服等，与之对应的是工单系统，将客服任务进行队列管 理，分配给相应的客服。
15. 店铺管理:功能庞杂，相当于提供给B端用户一个Saas管理 后台，提供管理商品、营销、订单一系列功能，主要针对一些有对B端 业务的电商开放平台。

对电商公司来讲，最核心最难做的有三部分:商品、订单、库存。 商品与店铺、营销、评价等相关;订单与会员、营销、支付、库存、物 流等相关;库存与订单、采购、WMS、营销等相关。系统之间业务逻 辑和交互异常复杂，规则多样。

对电商后端支撑线各模块的业务功能有初步认知之后，可以看到的 是，平常手机中的一个电商APP，背后是若干子系统在支撑着，亦是许 多技术和产品人员在辛苦付出。

每个子系统不是孤立的，通过产品架构相互关联，定义其功能范 围。产品架构与技术架构相辅相成，产品架构决定需求和设计，技术架 构决定技术框架与性能。

产品架构将这些不同用途的功能进行聚类整合，将电商后台拆分成 多个子系统，明确业务边界，尽量减少系统之间的耦合，高效支撑前端 业务。


#### 后台丰富度的权衡

对于电商后台，初创小公司用几十个开发人员就能满足需求开发， 维持业务流转，大公司则需要几百甚至上千个开发人员来进行开发维 护。这就涉及后台系统复杂度的问题，除了业务范围的区别，还有业务 量的因素。

对产品经理来说，并不是要把系统做得大而全，也不是小而精。前 面提到过，产品经理要做现实的理想主义者，根据实际情况来制定产品 迭代计划，不求一步到位。

不同的发展阶段，产品功能和技术实现的复杂度也是不一样的， 在产品开发初期，为了尽快上线、降低开发成本，会优先开发主需 求，后期随着业务发展慢慢迭代。很多后台产品在上线一段时间后，随 着业务增长处理起来会变得越来越吃力。各系统模块杂糅在一起，耦合 度高，还有可能出现牵一发而动全身的情况。后台产品经理的能力很大 一部分在于对业务的梳理能力，越到后台发展中后期，业务逻辑会越复 杂。对业务进行拆分，定义产品架构，支撑中长期的业务发展，极其考 验产品经理的能力。

以上我们围绕最核心 最难做的三部分展开针对后台功能的一些筛选最终确定下来的功能模块如下图所示

|  功能模块 | 描述  |
|  ----   | ---- |
| 商品中心| 管理商品属性、类目、价格等|
|订单中心| 管理订单数据，订单信息、订单下发、库存更新|
|支付、账户中心| 本例子均采用余额支付 可以说是账户中心、也可以叫做支付中心|
|会员中心| 主要管理用户等级、用户权益、积分等信息、增加用户粘性|
|促销中心| 管理促销活动|
|内容管理系统|对用户端页面内容进行管理 Banner、轮播、广告、活动引导|
|评价中心|管理商品评价和用户反馈|
|店铺管理|相当于提供给B端用户一个Saas管理后台|


### 商品中心
商品中心的合理设计不仅能够满足前端商品的 多样化展示，还能支撑复杂场景下，商品信息在订单中的系统流转。

为了更清晰地描述商品中心这项重量级工程，也是为了能够让后台 各系统模块理解起来更加轻松，笔者主要从9个方面来阐述商品中心: 商品的基本概念、类目和品牌管理、属性管理、SKU编辑、商品编辑、 商品管理、商品搜索及筛选、商品推荐、商品评论等。

随着商业模式的变化，商品中心的架构亦会随之变动，例如商品分 为实物商品或虚拟商品，商品归属分自营或平台商家，售卖分为正常售 卖和预售。不同业务场景下商品中心的设计会有些不同。虽然本文讲的 主要是类似B2C模式的商品中心的设计，但是万变不离其宗，只要善于 思考，结合业务场景，举一反三，都能够找到最合适的解决方案。

#### 商品基本概述
下面介绍一下关于商品的一些术语，类似SKU、SPU、 属性、类目等，下面具体介绍一下电商的一些基本术语。

SKU:(Stock Keeping Uint，即库存量单位)，库存控制的最小可 用单位。例如“iPhone 7 Plus 128G银色”就是一个SKU，仓库管理、采购 进货、库存管理都是以SKU为记录单元。

SPU:(Standard Product Unit，即标准化产品单元)，是一组标准 化信息的集合，例如“iPhone 7 Plus”就是一个SPU。

类目:即分类树。电商常用的有两层类目:前台展示类目和后端商 品类目。前台类目指的是展示给消费者看的类目，会根据季节、销售策 略、活动进行变动;后台类目属于基础数据，不可随意变动，添加SKU 时都需要选择后台类目，进行绑定。

属性:分为关键属性、销售属性、非关键属性。关键属性是指能够 唯一确定产品的属性，是必填项，例如手机的屏幕尺寸、型号属于关键 属性。销售属性是组成SKU的特殊属性，或称为“规格属性”，例如手机 的“颜色”、“内存”。非关键属性指的是除关键属性、销售属性外的其他 属性，如手机的手机接口类型。非关键属性不一定是非必填项，不过有 时为了商品信息完整，也会设为必填项。

商品模块的组成较为复杂，特别是定义SKU 和 SPU 时，涉及类 目、属性等信息。笔者画了一下商品的架构图，根据商品 的公共数据库，主要包含品牌库、属性库、通用规格库、税率库、生产 信息库(产地)等信息，先定义出SKU，然后加上商品描述和规格，就 成了商品。对于商品库，衍生出了价格管理、评论管理、搜索筛选、商 品推荐等模块。当然还会有库存管理，后面会详细介绍到。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320204429.png)

#### 类目管理和品牌管理

**类目管理**

商品类目分为两层:基础数据类目层(后台类目)、 前台展示类目层(前台类目)。

为什么要将前、后台 类目分开管理，而不是前、后台共用一套类目呢?

1. 随着商品量的增多(京东的SKU 达到数百万级，淘宝、天猫的SKU达到数亿级)、类目树的层级越来越 深，一方面，如果买家直接使用后台类目，那么查找商品时将越来越 难。
2. 另一方面，出于日常运营需要，运营人员在调整类目时，都需要去 变更商品的类目，工作量巨大，而且随着节日、时令季节变化，运营会 经常变更类目。

后台类目面向商家或供应 链人员，商品属性、销售属性及品牌等很多数据都是在基础类目上进行 管理;前台类目面向用户，方便用户查找商品，还可以随着运营需要去 调整。前、后台类目通过映射关联。

类目管理的作用在于以下几点：
1. 方便快速发布及管理商品，供应链人员或平台商家更好进行 商品管理。
2. 标准化商品服务，对于电商平台，品类定义基本确定平台的 商品服务范围。
3. 有利于仓库管理，合理的商品类目管理还能方便仓库中库位 分区管理商品。
4. 日常运营需要，在电商运营中，需要进行商品聚类，科学的 类目管理可以减少运营的管理工作。

**前后台类目**

1. 后台类目

后台类目主要面向平台商家，用于管理商品和属性。在添加和管理 商品时，都是在基础数据类目层对商品进行管理，后台类目相对固定，确定了之后不会轻易变更或删除，如果类目下 挂载有商品，就不能删除或作废。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320210344.png)

类目树的层次不能太深，一般三层或四层。如果太深，不论对于管 理还是技术性能来说，都是不利的。类目树中最后一层类目称为叶子类 目，商品必须挂载于叶子类目下。

商品属性、销售属性及品牌等很多数据都是在基础类目上进行管 理。发布商品时，在选择好叶子类目之后，会被要求选择品牌、填写相 应的属性，所以类目管理属于较为核心的工作，一定要从长远角度考 虑。

赠品作为促销(低价)商品，应该专门设置类目，通常放置到商品 发布类目“其他—赠品”类目下。

2. 前台类目

前台类目主要面向用户，方便用户筛选查找商品，如图3-3所示，是 京东的前台类目。前台类目可以根据运营需要，灵活多变。所以处理产 品的前端类目时，就应该提供多样化的前端类目支持。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320210435.png)

**从用户渠道的纬度上讲:**

- 前台类目可支持不同客户端的设置。PC端、H5端、APP端等 渠道由于用户群体有所差异，可分别设置前台类目，独立运营。例如京 东的PC商城、APP、微信商城的分类就有所差异。
- 支持平台商家自定义店铺前台类目。每个商家的产品和定位 不同，有不同的类目运营需求。例如淘宝的每个店铺都可以自定义自己 的前端类目。

**从前台类目定义的维度上讲:**
- 前台类目对应后台类目，可一对一、一对多、多对多，自由 组合，动态调整。现在大部分自营电商都是用的这种类型。
- 前台类目直接对应品牌、商品，适合商品较少的小商家。这 种情况主要是因为一些电商平台提供给平台上商家的类目服务，在添加商品时可以直接选择前台展示的类目。
- 前台类目对应后台的叶子类目和某项属性的组合。例如分类 时选择奶粉中的1段、2段、3段等属性组成类目。

前台类目不同于固定的后台类目，编辑很灵活、可重叠、可删除、 可随时变动，定时生效。

**品牌管理**

品牌是商品的必备属性之一，在用户做购买决策时亦是关键因素。 品牌管理的流程相对于类目管理来说更简单。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320210720.png)

需要注意的是以下两点。

1. 新建品牌，其相关字段一般有:Logo、中文名、英文名、产 地、备注、状态(可用、不可用)。
2. 将品牌关联到类目上，关系也是一对一、一对多、多对一。 例如雀巢的产品有咖啡、奶粉、饮料等不同种类，这三类产品属于不同 的叶子类目。

品牌关联类目的好处在于:提升发布商品的便捷性，避免出错;品牌管理标准化;在搜索筛选商品时更加快捷。

当然品牌关联类目也会带来一定的管理难度。对于中小电商来说， 当品牌数量并不是太多的时候，可以不做关联。**本次咱们就不做关联了。**

#### 属性管理

属性是对产品性质的描述，是区分产品差异性的集合。在电商中， 属性通常分为关键属性、销售属性、非关键属性、商品属性。

1. 关键属性:能够确认唯一“产品”的属性。关键属性可以是一 个属性，也可以是多个属性的组合。例如:通过手机的“品牌”、“型 号”两个属性组合就能确定唯一的产品，这两个就是关键属性;通过服 装的“品牌”、“货号”两个属性组合能确定唯一的产品，所以这两个也是 关键属性。
2. 销售属性:也称为规格属性。其是组成SKU的特殊属性，它 会影响买家的购买和卖家的库存管理。例如服装的“颜色”、“套餐”和“尺 码”，都是销售属性。
3. 非关键属性:除关键属性、销售属性外的其他属性。非关键 属性不一定是非必填项，有时为了商品信息完整，也会被设为必填项。 注意，产品的非关键属性并不包括商品属性。
4. 商品属性:表示商品的特有特征，比如新旧程度、保修方式 等，不能作为产品的属性。

属性包括属性名、属性值，一般都是挂在具体类目下，设置为必填 或非必填。在设置属性值时，须保留一定的扩展性，部分允许自定义属 性。商品属性管理要求强大的类目运营能力，在中小型电商平台一般会 提供基础属性值，再开放自定义属性编辑，让用户来完善属性库数据。

**商品属性系统的设计**

为了方便商品管理，我们需要在系统中建立一套属性库，类目属性 都是调取的属性库里的数据，而属性搭建的原则通常是从属性分类的纬 度来搭建的，分别是关键属性、销售属性、非关键属性、商品属性。

在定义一个属性时，需要挂载在类目下，区分属性分 类(关键属性、销售属性、非关键属性、商品属性)，并确定属性值、 显示类型(单选、多选、可自定义)、是否必填以及属性分组。对属性 的定义是为了在添加商品时，属性列有判断条件。在搜索筛选时，确定 各属性字段的意义和权重。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320213552.png)

属性编辑主要是定义当前分类的商品具有哪些属性。在属性管理 上，有两个产品方法可以使用，属性分组和属性继承。

1. 属性分组

由于一个类目的属性有时会很多，可能几十个，甚至上百个，所以 引入了属性分组的概念，把形容某一类特征的几个属性归属于一个组，这样在前端的规格参数里可以按后台设置的属性分组按序展示，也方便 对属性进行管理。屏幕参数、镜头参数、曝光控制、闪光 灯参数等都属于属性分组。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320214031.png)

2. 属性继承

如果网站的商品分类为三个层级，每个商品由很多的商品属性构 成，其中同一层级的商品属性可能有很多都是相同的属性，为了减少属 性添加时的工作量，我们将这部分共用的属性归类后赋值在上一层级的 分类依次操作，将归类后的属性分别赋值给上级的分类中。 每一个层级的商品属性继承上一层级的商品属性，将每个层级的属 性提取出来，便组成了一个商品的完整的属性表达。

![](https://cdn.jsdelivr.net/gh/janker0718/image_store/img/20220320214306.png)




2. 属性继承



### 订单中心

### 支付中心

### 会员中心

### 促销中心

### 内容管理系统

### 评价中心

### 店铺管理

## B2C电商系统架构












